(function(e){function t(t){for(var o,a,i=t[0],c=t[1],u=t[2],f=0,d=[];f<i.length;f++)a=i[f],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&d.push(r[a][0]),r[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);l&&l(t);while(d.length)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],o=!0,i=1;i<n.length;i++){var c=n[i];0!==r[c]&&(o=!1)}o&&(s.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},r={app:0},s=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"1edb":function(e,t,n){},"230e":function(e,t,n){"use strict";var o=n("2315"),r=n.n(o);r.a},2315:function(e,t,n){},"51aa":function(e,t,n){"use strict";var o=n("1edb"),r=n.n(o);r.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=(n("fa6d"),n("5903"),n("5c96")),s=n.n(r),a=(n("0fae"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("h1",[e._v("Awtrix Simulator")]),n("div",{staticClass:"debug-panel"},[n("div",{staticClass:"debug-item"},[n("label",[e._v("SELECT")]),n("span",[e._v(e._s(e.selectAreaText))])]),n("div",{staticClass:"debug-item"},[n("label",[e._v("FCOLOR")]),n("span",[e._v(e._s(e.bgColorText))])])]),n("ToolsPanel",{attrs:{tools:e.tools,active:e.currentMode},on:{click:e.setCurrentMode,bgColorChange:e.handleBgColorChange}}),n("div",{staticClass:"led-wrapper"},[n("LEDMatrix",{ref:"matrix",attrs:{size:e.size,selectMode:e.selectMode},on:{select:e.handleSelect,drag:e.handleDrag}})],1)],1)}),i=[],c=(n("99af"),n("07ac"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tools-panel"},[n("div",{staticClass:"tools-group"},e._l(e.tools,(function(t){return n("div",{key:t,staticClass:"tools-item",class:{active:e.active===t},on:{click:function(n){return n.stopPropagation(),e.$emit("click",t)},mousedown:function(e){e.stopPropagation()}}},[n("i",{staticClass:"iconfont",class:"icon-"+t})])})),0),n("div",{staticClass:"tools-group"},[n("div",{staticClass:"tools-item"},[n("el-color-picker",{attrs:{predefine:e.presetColor,size:"mini"},model:{value:e.bgColor,callback:function(t){e.bgColor=t},expression:"bgColor"}})],1)])])}),u=[],l={props:{tools:{type:Array,default:function(){return["select"]}},active:{type:String,required:!0}},data:function(){return{bgColor:"#00BCD4",presetColor:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"]}},watch:{bgColor:{handler:function(e){e?this.$emit("bgColorChange",this.bgColor):(this.bgColor="#444444",this.$emit("bgColorChange",null))},immediate:!0}}},f=l,d=(n("230e"),n("2877")),h=Object(d["a"])(f,c,u,!1,null,null,null),m=h.exports,p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"led-matrix"},e._l(e.size[1],(function(t,o){return n("div",{key:o,staticClass:"led-row"},e._l(e.size[0],(function(t,r){return n("LEDBlock",{key:r,attrs:{color:e._f("filterColor")(e.getColor(r,o)),active:e.isInsideSelectArea(r,o)},on:{mousedown:function(t){return e.handleLEDMouseDown(r,o)},mouseover:function(t){return e.handleLEDMouseOver(r,o)}}})})),1)})),0)},b=[],v=(n("cb29"),n("c19f"),n("a9e3"),n("d3b7"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("3835")),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"led-block",class:{active:e.active},style:e.style,on:{mousedown:function(t){return t.stopPropagation(),e.$emit("mousedown")},mouseover:function(t){return t.stopPropagation(),e.$emit("mouseover")}}})},C=[],w={name:"LEDBlock",props:{size:{type:Number,default:16},margin:{type:Number,default:1},color:{type:String,default:"#444"},active:{type:Boolean,default:!1}},computed:{style:function(){return{width:this.size+"px",height:this.size+"px",margin:this.margin+"px",background:this.color}}}},x=w,A=(n("d25d"),Object(d["a"])(x,g,C,!1,null,"1b952cd1",null)),y=A.exports,I=(n("ac1f"),n("25f0"),function(e){if(/^#[0-9a-fA-F]{3}$/.exec(e)){var t=parseInt(e[1]+e[1],16),n=parseInt(e[2]+e[2],16),o=parseInt(e[3]+e[3],16);return[t,n,o]}if(/^#[0-9a-fA-F]{6}$/.exec(e)){var r=parseInt(e[1]+e[2],16),s=parseInt(e[3]+e[4],16),a=parseInt(e[5]+e[6],16);return[r,s,a]}return[0,0,0]}),E=function(e){var t=Object(v["a"])(e,3),n=t[0],o=t[1],r=t[2],s=function(e){var t=e.toString(16);return 1===t.length&&(t+="0"),t};return"#"+s(n)+s(o)+s(r)},M=function(e){for(var t="",n=new Uint8Array(e),o=n.byteLength,r=0;r<o;r++)t+=String.fromCharCode(n[r]);return window.btoa(t)},D={hex2rgb:I,rgb2hex:E,buffer2base64:M},P={name:"LEDMatrix",components:{LEDBlock:y},filters:{filterColor:function(e){return e||"#444"}},props:{size:{type:Array,default:function(){return[32,8]}},selectMode:{type:Number,default:2}},data:function(){var e=this.size[0]*this.size[1],t=Array(e).fill(null);return{mouseDown:!1,mouseInfo:{down:!1,startX:-1,startY:-1,endX:-1,endY:-1},selectArea:{enable:!1,startPos:[-1,-1],endPos:[-1,-1]},colorData:t}},computed:{maxWidth:function(){return this.size[0]},maxHeight:function(){return this.size[1]}},created:function(){var e=this;document.addEventListener("mousedown",(function(){return e.mouseDown=!0})),document.addEventListener("mouseup",(function(){return e.mouseDown=!1}))},methods:{handleLEDMouseDown:function(e,t){var n=this;if(!this.selectMode)return this.mouseDown=!0,void this.$emit("drag",e,t);this.mouseInfo.down=!0,this.mouseInfo.startX=e,this.mouseInfo.startY=t,this.mouseInfo.endX=e,this.mouseInfo.endY=t,this.calcSelectArea();var o=function(){JSON.parse(JSON.stringify(n.selectArea));n.$emit("select",n.selectArea)},r=function e(){n.mouseInfo.down=!1,n.calcSelectArea(),document.removeEventListener("mouseup",e),o()},s=function(){n.selectArea.enable=!1,document.removeEventListener("mouseup",r),o()};document.addEventListener("mouseup",r),document.addEventListener("mousedown",s)},handleLEDMouseOver:function(e,t){2===this.selectMode?this.mouseInfo.down&&(this.mouseInfo.endX=e,this.mouseInfo.endY=t,this.calcSelectArea()):1===this.selectMode?this.mouseInfo.down&&(this.mouseInfo.startX=e,this.mouseInfo.startY=t,this.mouseInfo.endX=e,this.mouseInfo.endY=t,this.calcSelectArea()):this.mouseDown&&this.$emit("drag",e,t)},calcSelectArea:function(){~this.mouseInfo.startX||~this.mouseInfo.startY||~this.mouseInfo.endX||~this.mouseInfo.endY?(this.selectArea.startPos=[Math.min(this.mouseInfo.startX,this.mouseInfo.endX),Math.min(this.mouseInfo.startY,this.mouseInfo.endY)],this.selectArea.endPos=[Math.max(this.mouseInfo.startX,this.mouseInfo.endX),Math.max(this.mouseInfo.startY,this.mouseInfo.endY)],this.selectArea.enable=!0):this.selectArea.enable=!1},isInsideSelectArea:function(e,t){return this.selectArea.enable&&e>=this.selectArea.startPos[0]&&e<=this.selectArea.endPos[0]&&t>=this.selectArea.startPos[1]&&t<=this.selectArea.endPos[1]},getColor:function(e,t){return this.colorData[t*this.size[0]+e]},setColor:function(e,t,n){this.$set(this.colorData,t*this.size[0]+e,n)},getData:function(e,t,n,o){var r=n-e+1,s=o-t+1,a=r*s*3+2,i=new ArrayBuffer(a),c=new DataView(i),u=0;c.setUint8(u++,r),c.setUint8(u++,s);for(var l=t;l<=o;++l)for(var f=e;f<=n;++f){var d=this.getColor(f,l),h=D.hex2rgb(d),m=Object(v["a"])(h,3),p=m[0],b=m[1],g=m[2];c.setUint8(u++,p),c.setUint8(u++,b),c.setUint8(u++,g)}return i},setData:function(e,t,n){for(var o=0,r=new Uint8Array(n),s=r[o++],a=r[o++],i=t;i<=t+a-1;++i)for(var c=e;c<=e+s-1;++c){var u=r[o++],l=r[o++],f=r[o++];if(u||l||f){var d=D.rgb2hex([u,l,f]);this.setColor(c,i,d)}else this.setColor(c,i,null)}}}},S=P,O=(n("51aa"),Object(d["a"])(S,p,b,!1,null,"e0eac1f2",null)),L=O.exports,_=n("d4ec"),j=n("bee2"),k={SELECT:"select",DRAW:"brush"},z=function(){function e(){Object(_["a"])(this,e),this.matrixElm=null}return Object(j["a"])(e,[{key:"init",value:function(e){this.matrixElm=e}},{key:"onSelect",value:function(e,t){}},{key:"onDraw",value:function(e,t){var n=Object(v["a"])(e,2),o=n[0],r=n[1];this.matrixElm.setColor(o,r,t)}}]),e}(),$=z,T={name:"App",components:{ToolsPanel:m,LEDMatrix:L},data:function(){return{matrix:new $,size:[32,8],tools:Object.values(k),currentMode:k.SELECT,selectMode:2,selectArea:{enable:!1,startPos:[0,0],endPos:[0,0]},bgColor:"#444444"}},computed:{selectAreaText:function(){if(!0===this.selectArea.enable){var e=this.selectArea.startPos,t=this.selectArea.endPos;return"[".concat(e[0],",").concat(e[1],"] [").concat(t[0],",").concat(t[1],"]")}return"[N,N] [N,N]"},bgColorText:function(){return this.bgColor?this.bgColor.toUpperCase():"NULL"}},mounted:function(){this.matrix.init(this.$refs.matrix),this.setCurrentMode(k.SELECT)},methods:{setCurrentMode:function(e){this.currentMode=e,e===k.SELECT?this.selectMode=2:e===k.DRAW&&(this.selectMode=0)},handleSelect:function(e){this.selectArea.enable=e.enable,this.selectArea.startPos=e.startPos,this.selectArea.endPos=e.endPos,this.matrix.onSelect(this.currentMode,this.selectArea)},handleDrag:function(e,t){this.currentMode===k.DRAW&&this.matrix.onDraw([e,t],this.bgColorText)},handleBgColorChange:function(e){this.bgColor=e}}},X=T,Y=(n("5c0b"),Object(d["a"])(X,a,i,!1,null,null,null)),N=Y.exports;o["default"].use(s.a,{size:"small"}),o["default"].config.productionTip=!1,new o["default"]({render:function(e){return e(N)}}).$mount("#app")},5903:function(e,t,n){},"5c0b":function(e,t,n){"use strict";var o=n("9c0c"),r=n.n(o);r.a},"9c0c":function(e,t,n){},a538:function(e,t,n){},d25d:function(e,t,n){"use strict";var o=n("a538"),r=n.n(o);r.a}});
//# sourceMappingURL=app.cf2e1875.js.map