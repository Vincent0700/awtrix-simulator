(function(e){function t(t){for(var n,a,i=t[0],u=t[1],c=t[2],d=0,f=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&f.push(s[a][0]),s[a]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);l&&l(t);while(f.length)f.shift()();return r.push.apply(r,c||[]),o()}function o(){for(var e,t=0;t<r.length;t++){for(var o=r[t],n=!0,i=1;i<o.length;i++){var u=o[i];0!==s[u]&&(n=!1)}n&&(r.splice(t--,1),e=a(a.s=o[0]))}return e}var n={},s={app:0},r=[];function a(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=n,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(o,n,function(t){return e[t]}.bind(null,n));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var l=u;r.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},2125:function(e,t,o){},"230e":function(e,t,o){"use strict";var n=o("2315"),s=o.n(n);s.a},2315:function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("2b0e"),s=(o("fa6d"),o("5903"),o("5c96")),r=o.n(s),a=(o("0fae"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("h1",[e._v("Awtrix Simulator")]),o("DebugPanel",{attrs:{lists:e.debugInfo}}),o("InstructionPanel",{attrs:{name:e.tipsShown}}),o("ToolsPanel",{attrs:{tools:e.tools,active:e.currentMode},on:{click:e.setCurrentMode,mouseover:e.handleToolsMouseover,mouseout:e.handleToolsMouseout,bgColorChange:e.handleBgColorChange}}),o("div",{staticClass:"led-wrapper"},[o("LEDMatrix",{ref:"matrix",attrs:{size:e.size,selectMode:e.selectMode},on:{select:e.handleSelect,drag:e.handleDrag}})],1)],1)}),i=[],u=(o("99af"),o("07ac"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"tools-panel"},[o("div",{staticClass:"tools-group"},e._l(e.tools,(function(t){return o("div",{key:t,staticClass:"tools-item",class:{active:e.active===t},on:{click:function(o){return o.stopPropagation(),e.$emit("click",t)},mouseover:function(o){return e.handleMouseover(t)},mouseout:function(o){return e.handleMouseout(t)},mousedown:function(e){e.stopPropagation()}}},[o("i",{staticClass:"iconfont",class:"icon-"+t})])})),0),o("div",{staticClass:"tools-group"},[o("div",{staticClass:"tools-item",on:{mouseover:function(t){return e.handleMouseover("FCOLOR")},mouseout:function(t){return e.handleMouseout("FCOLOR")},mousedown:function(e){e.stopPropagation()},click:function(e){e.stopPropagation()}}},[o("el-color-picker",{attrs:{predefine:e.presetColor,size:"mini"},model:{value:e.bgColor,callback:function(t){e.bgColor=t},expression:"bgColor"}})],1)]),o("div",{staticClass:"tools-group"},[o("div",{staticClass:"tools-item",on:{mouseover:function(t){return e.handleMouseover("DOWNLOAD")},mouseout:function(t){return e.handleMouseout("DOWNLOAD")},mousedown:function(e){e.stopPropagation()},click:function(e){e.stopPropagation()}}},[o("i",{staticClass:"iconfont icon-download"})]),o("div",{staticClass:"tools-item",on:{mouseover:function(t){return e.handleMouseover("UPLOAD")},mouseout:function(t){return e.handleMouseout("UPLOAD")},mousedown:function(e){e.stopPropagation()},click:function(e){e.stopPropagation()}}},[o("i",{staticClass:"iconfont icon-upload"})])])])}),c=[],l=(o("4160"),o("159b"),{props:{tools:{type:Array,default:function(){return["select"]}},active:{type:String,required:!0}},data:function(){return{bgColor:"#00BCD4",presetColor:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"]}},watch:{bgColor:{handler:function(e){e?this.$emit("bgColorChange",this.bgColor):(this.bgColor="#444444",this.$emit("bgColorChange",null))},immediate:!0}},mounted:function(){var e=document.getElementsByClassName("el-color-dropdown");e.forEach((function(e){e.onmousedown=function(e){return e.stopPropagation()}}))},methods:{handleMouseover:function(e){this.$emit("mouseover",e)},handleMouseout:function(e){this.$emit("mouseout",e)}}}),d=l,f=(o("230e"),o("2877")),h=Object(f["a"])(d,u,c,!1,null,null,null),m=h.exports,p=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"led-matrix"},e._l(e.size[1],(function(t,n){return o("div",{key:n,staticClass:"led-row"},e._l(e.size[0],(function(t,s){return o("LEDBlock",{key:s,attrs:{color:e._f("filterColor")(e.getColor(s,n)),active:e.isInsideSelectArea(s,n)},on:{mousedown:function(t){return e.handleLEDMouseDown(s,n)},mouseover:function(t){return e.handleLEDMouseOver(s,n)}}})})),1)})),0)},v=[],b=(o("cb29"),o("c19f"),o("a9e3"),o("d3b7"),o("5cc6"),o("9a8c"),o("a975"),o("735e"),o("c1ac"),o("d139"),o("3a7b"),o("d5d6"),o("82f8"),o("e91f"),o("60bd"),o("5f96"),o("3280"),o("3fcc"),o("ca91"),o("25a1"),o("cd26"),o("3c5d"),o("2954"),o("649e"),o("219c"),o("170b"),o("b39a"),o("72f7"),o("3835")),g=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"led-block",class:{active:e.active},style:e.style,on:{mousedown:function(t){return t.stopPropagation(),e.$emit("mousedown")},mouseover:function(t){return t.stopPropagation(),e.$emit("mouseover")}}})},w=[],C={name:"LEDBlock",props:{size:{type:Number,default:16},margin:{type:Number,default:1},color:{type:String,default:"#444"},active:{type:Boolean,default:!1}},computed:{style:function(){return{width:this.size+"px",height:this.size+"px",margin:this.margin+"px",background:this.color}}}},A=C,E=(o("d25d"),Object(f["a"])(A,g,w,!1,null,"1b952cd1",null)),D=E.exports,O=(o("ac1f"),o("25f0"),o("3ca3"),o("ddb0"),o("2b3d"),o("8390"));window.encode=O["encode"],window.decode=O["decode"];var M=function(e){if(/^#[0-9a-fA-F]{3}$/.exec(e)){var t=parseInt(e[1]+e[1],16),o=parseInt(e[2]+e[2],16),n=parseInt(e[3]+e[3],16);return[t,o,n]}if(/^#[0-9a-fA-F]{6}$/.exec(e)){var s=parseInt(e[1]+e[2],16),r=parseInt(e[3]+e[4],16),a=parseInt(e[5]+e[6],16);return[s,r,a]}return[0,0,0]},y=function(e){var t=Object(b["a"])(e,3),o=t[0],n=t[1],s=t[2],r=function(e){var t=e.toString(16);return 1===t.length&&(t+="0"),t};return"#"+r(o)+r(n)+r(s)},x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"untitled.led",o=document.createElement("a"),n=window.URL.createObjectURL(new Blob([e]));o.href=n,o.download=t,o.click(),window.URL.revokeObjectURL(n)},P={hex2rgb:M,rgb2hex:y,bin2str:O["encode"],str2bin:O["decode"],downloadBinary:x},L={name:"LEDMatrix",components:{LEDBlock:D},filters:{filterColor:function(e){return e||"#444"}},props:{size:{type:Array,default:function(){return[32,8]}},selectMode:{type:Number,default:2}},data:function(){var e=this.size[0]*this.size[1],t=Array(e).fill(null);return{mouseDown:!1,mouseInfo:{down:!1,startX:-1,startY:-1,endX:-1,endY:-1},selectArea:{enable:!1,startPos:[-1,-1],endPos:[-1,-1]},colorData:t}},created:function(){var e=this;document.addEventListener("mousedown",(function(){return e.mouseDown=!0})),document.addEventListener("mouseup",(function(){return e.mouseDown=!1}))},methods:{handleLEDMouseDown:function(e,t){var o=this;if(!this.selectMode)return this.mouseDown=!0,void this.$emit("drag",e,t);this.mouseInfo.down=!0,this.mouseInfo.startX=e,this.mouseInfo.startY=t,this.mouseInfo.endX=e,this.mouseInfo.endY=t,this.calcSelectArea();var n=function(){JSON.parse(JSON.stringify(o.selectArea));o.$emit("select",o.selectArea)},s=function e(){o.mouseInfo.down=!1,o.calcSelectArea(),document.removeEventListener("mouseup",e),n()},r=function(){o.selectArea.enable=!1,document.removeEventListener("mouseup",s),n()};document.addEventListener("mouseup",s),document.addEventListener("mousedown",r)},handleLEDMouseOver:function(e,t){2===this.selectMode?this.mouseInfo.down&&(this.mouseInfo.endX=e,this.mouseInfo.endY=t,this.calcSelectArea()):1===this.selectMode?this.mouseInfo.down&&(this.mouseInfo.startX=e,this.mouseInfo.startY=t,this.mouseInfo.endX=e,this.mouseInfo.endY=t,this.calcSelectArea()):this.mouseDown&&this.$emit("drag",e,t)},calcSelectArea:function(){~this.mouseInfo.startX||~this.mouseInfo.startY||~this.mouseInfo.endX||~this.mouseInfo.endY?(this.selectArea.startPos=[Math.min(this.mouseInfo.startX,this.mouseInfo.endX),Math.min(this.mouseInfo.startY,this.mouseInfo.endY)],this.selectArea.endPos=[Math.max(this.mouseInfo.startX,this.mouseInfo.endX),Math.max(this.mouseInfo.startY,this.mouseInfo.endY)],this.selectArea.enable=!0):this.selectArea.enable=!1},isInsideSelectArea:function(e,t){return this.selectArea.enable&&e>=this.selectArea.startPos[0]&&e<=this.selectArea.endPos[0]&&t>=this.selectArea.startPos[1]&&t<=this.selectArea.endPos[1]},getColor:function(e,t){return this.colorData[t*this.size[0]+e]},setColor:function(e,t,o){this.$set(this.colorData,t*this.size[0]+e,o)},getData:function(e,t,o,n){var s=o-e+1,r=n-t+1,a=s*r*3+2,i=new ArrayBuffer(a),u=new DataView(i),c=0;u.setUint8(c++,s),u.setUint8(c++,r);for(var l=t;l<=n;++l)for(var d=e;d<=o;++d){var f=this.getColor(d,l),h=P.hex2rgb(f),m=Object(b["a"])(h,3),p=m[0],v=m[1],g=m[2];u.setUint8(c++,p),u.setUint8(c++,v),u.setUint8(c++,g)}return i},setData:function(e,t,o){for(var n=0,s=new Uint8Array(o),r=s[n++],a=s[n++],i=t;i<=t+a-1;++i)for(var u=e;u<=e+r-1;++u){var c=s[n++],l=s[n++],d=s[n++];if(c||l||d){var f=P.rgb2hex([c,l,d]);this.setColor(u,i,f)}else this.setColor(u,i,null)}}}},S=L,I=(o("d0b0"),Object(f["a"])(S,p,v,!1,null,"b5f85584",null)),_=I.exports,k=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"debug-panel"},e._l(e.lists,(function(t){return o("div",{key:t.lable,staticClass:"debug-item"},[o("label",[e._v(e._s(t.label))]),o("span",[e._v(e._s(e.$parent[t.value]))])])})),0)},j=[],R={props:{lists:{type:Array,default:function(){return[]}}}},T=R,$=(o("a689"),Object(f["a"])(T,k,j,!1,null,"13f1cbf5",null)),N=$.exports,z=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"show",rawName:"v-show",value:e.name,expression:"name"}],staticClass:"instruction-panel"},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.name===e.MODE.SELECT,expression:"name === MODE.SELECT"}]},[o("header",[e._v("SELECT MODE")]),o("p",[e._v("1. SELECT an LED area.")]),o("p",[e._v("2. PRESS 'D' to DRAW.")]),o("p",[e._v("3. PRESS 'BACKSPACE' to ERASE color.")])]),o("div",{directives:[{name:"show",rawName:"v-show",value:e.name===e.MODE.DRAW,expression:"name === MODE.DRAW"}]},[o("header",[e._v("DRAW MODE")]),o("p",[e._v("1. DRAG your mouse to DRAW.")])]),o("div",{directives:[{name:"show",rawName:"v-show",value:"FCOLOR"===e.name,expression:"name === 'FCOLOR'"}]},[o("header",[e._v("FOREGROUND COLOR")])])])},U=[],X=o("d4ec"),Y=o("bee2"),B={SELECT:"select",DRAW:"brush"},W=function(){function e(){Object(X["a"])(this,e),this.matrixElm=null}return Object(Y["a"])(e,[{key:"init",value:function(e){this.matrixElm=e}},{key:"onDraw",value:function(e,t){var o=Object(b["a"])(e,2),n=o[0],s=o[1];this.matrixElm.setColor(n,s,t)}},{key:"onDrawArea",value:function(e,t,o){for(var n=Object(b["a"])(e,2),s=n[0],r=n[1],a=Object(b["a"])(t,2),i=a[0],u=a[1],c=r;c<=u;++c)for(var l=s;l<=i;++l)this.onDraw([l,c],o)}}]),e}(),F=W,J={props:{name:{type:String,required:!0}},data:function(){return{MODE:B}}},q=J,G=(o("9e0c"),Object(f["a"])(q,z,U,!1,null,"072415a8",null)),K=G.exports,V={name:"App",components:{ToolsPanel:m,DebugPanel:N,InstructionPanel:K,LEDMatrix:_},data:function(){return{matrix:new F,size:[32,8],tools:Object.values(B),currentMode:B.SELECT,tipsShown:"",selectMode:2,selectArea:{enable:!1,startPos:[0,0],endPos:[0,0]},bgColor:"#444444",debugInfo:[{label:"SELECT",value:"selectAreaText"},{label:"FCOLOR",value:"bgColorText"}]}},computed:{selectAreaText:function(){if(!0===this.selectArea.enable){var e=this.selectArea.startPos,t=this.selectArea.endPos;return e[0]===t[0]&&e[1]===t[1]?"[".concat(e[0],",").concat(e[1],"]"):"[".concat(e[0],",").concat(e[1],"] [").concat(t[0],",").concat(t[1],"]")}return"[N,N] [N,N]"},bgColorText:function(){return this.bgColor?this.bgColor.toUpperCase():"NULL"}},mounted:function(){var e=this;this.matrix.init(this.$refs.matrix),this.setCurrentMode(B.SELECT),document.addEventListener("keydown",(function(t){68===t.keyCode?e.selectArea.enable&&e.matrix.onDrawArea(e.selectArea.startPos,e.selectArea.endPos,e.bgColorText):8===t.keyCode&&e.selectArea.enable&&e.matrix.onDrawArea(e.selectArea.startPos,e.selectArea.endPos,null)}))},methods:{setCurrentMode:function(e){this.currentMode=e,e===B.SELECT?this.selectMode=2:e===B.DRAW&&(this.selectMode=0)},handleToolsMouseover:function(e){this.tipsShown=e},handleToolsMouseout:function(e){this.tipsShown===e&&(this.tipsShown=null)},handleSelect:function(e){this.selectArea.enable=e.enable,this.selectArea.startPos=e.startPos,this.selectArea.endPos=e.endPos},handleDrag:function(e,t){this.currentMode===B.DRAW&&this.matrix.onDraw([e,t],this.bgColorText)},handleBgColorChange:function(e){this.bgColor=e}}},H=V,Q=(o("5c0b"),Object(f["a"])(H,a,i,!1,null,null,null)),Z=Q.exports;n["default"].use(r.a,{size:"small"}),n["default"].config.productionTip=!1,new n["default"]({render:function(e){return e(Z)}}).$mount("#app")},5903:function(e,t,o){},"5c0b":function(e,t,o){"use strict";var n=o("9c0c"),s=o.n(n);s.a},"73f1":function(e,t,o){},"9c0c":function(e,t,o){},"9e0c":function(e,t,o){"use strict";var n=o("73f1"),s=o.n(n);s.a},a538:function(e,t,o){},a689:function(e,t,o){"use strict";var n=o("d336"),s=o.n(n);s.a},d0b0:function(e,t,o){"use strict";var n=o("2125"),s=o.n(n);s.a},d25d:function(e,t,o){"use strict";var n=o("a538"),s=o.n(n);s.a},d336:function(e,t,o){}});
//# sourceMappingURL=app.667599cf.js.map